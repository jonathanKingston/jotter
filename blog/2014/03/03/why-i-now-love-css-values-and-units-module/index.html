<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="theme-color" content="#454545">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Why I now love CSS Values and Units module</title>
  <meta name="description" content="What I first thought">

  <link rel="stylesheet" href="https://jotter.jonathankingston.co.uk/css/main.css">
  
  <link rel="alternate" type="application/rss+xml" title="Jonathan Kingston" href="https://jotter.jonathankingston.co.uk/feed.xml">
</head>


  <body>

    <header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="https://jotter.jonathankingston.co.uk/">Jonathan Kingston</a>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
        
          <header class="post-header">
            <h1 class="post-title" itemprop="name headline">Why I now love CSS Values and Units module</h1>
            <p class="post-meta">
              
              <time datetime="2014-03-03 00:00:00 +0000" itemprop="datePublished">Mar 3, 2014</time>
              
              
            </p>
          </header>
        
          <div class="post-content" itemprop="articleBody">
            <h2>What I first thought</h2>
<p>When I first read about <a href="http://www.w3.org/TR/css3-values">CSS Values and Units module</a> I completely dismissed it.
At first, I thought using the <code>calc()</code> property would be a mad move for CSS and I was concerned how browsers would support new features.
My initial motivation to thinking this was that we already have JavaScript with a known use case in calculating properties.
I don't really think JavaScript is the best used for producing layout but it seemed far better than adding what is essentially a dynamic language construct into a declarative format.</p>
<!-- more -->
<h2>The rise of the CSS framework</h2>
<p>You only have to sift through some of the modern framework's code to realise that there is a units problem at hand here.
The frameworks I have had a chance to work with have all had the issue of mixing units and having to constantly specify dimensions.</p>
<p>The problem I see is code like this:</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;style&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">body {font-size:12px;}
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">.ems span {font-size:0.8em;}
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;/style&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;div class=&quot;ems&quot;&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;span&gt;Call me maybe&lt;/span&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;br /&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;span&gt;&lt;span&gt;Call me maybe&lt;/span&gt;&lt;/span&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;br /&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;span&gt;&lt;span&gt;&lt;span&gt;Call me maybe&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;/div&gt;
</span></pre>
<p>Which, if you run in a browser, you will notice the half arsed Carly Rae Jepsen lyrics fade away.</p>
<p>This can, however, be fixed by using <a href="http://www.w3.org/TR/css3-values/#rem-unit">rem</a> units instead:</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;style&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">body {font-size:12px;}
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">.rems span {font-size:0.8rem;}
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;/style&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;div class=&quot;rems&quot;&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;span&gt;Call me maybe&lt;/span&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;br /&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;span&gt;&lt;span&gt;Call me maybe&lt;/span&gt;&lt;/span&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;br /&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;"> </span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">    </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;span&gt;&lt;span&gt;&lt;span&gt;Call me maybe&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">&lt;/div&gt;
</span></pre>
<p>Which when run in a browser demonstrates that rem units stay a consistent size for all levels in the DOM.</p>
<p>The great news is rem units actually solves the issue here. However, in wades Internet Explorer 8, which doesn't support rem units - if you need to support IE 8 then we need to look elsewhere for an alternative solution.</p>
<p>So we are stuck with either using px or em units, which both can be hard to maintain for the reason above.</p>
<h2>Introducing Myth</h2>
<p>I could tell you lots about preprocessing languages like LESS and SASS, however I have always used them in angst - mainly due to the nature of inventing a new, non-standard language on top of CSS.</p>
<p><a href="http://myth.io">Myth</a>, on the other hand, is basically a mix of all of the latest <a href="http://www.w3.org">W3C</a> specifications which means that once all browsers support the features, the amount of processing can be decreased over time.</p>
<p>This is where <code>calc()</code> and CSS variables come into play, with the ability for us to now use an absolute size to reference element and font sizes.
Over time we can then change these to rem units with ease allowing for a much more flexible layout.</p>
<p>I created a quick <a href="http://jonathankingston.github.io/mythhub/">demo site for in-browser Myth compiling</a> so I could show examples.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">:root {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">var-base-font: 12px;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">h1 {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">font-size: calc(var(base-font) * 2);
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">h2 {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">font-size: calc(var(base-font) * 1.75);
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">h3 {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">font-size: calc(var(base-font) * 1.5);
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p><a href="http://jonathankingston.github.io/mythhub/?m=%3Aroot+%7B%0D%0A++var-base-font%3A+12px%3B%0D%0A%7D%0D%0A%0D%0Ah1+%7B%0D%0A++font-size%3A+calc%28var%28base-font%29+*+2%29%3B%0D%0A%7D%0D%0A%0D%0Ah2+%7B%0D%0A++font-size%3A+calc%28var%28base-font%29+*+1.75%29%3B%0D%0A%7D%0D%0A%0D%0Ah3+%7B%0D%0A++font-size%3A+calc%28var%28base-font%29+*+1.5%29%3B%0D%0A%7D">Example CSS Myth font calculation</a></p>
<p>When browser support is sufficiently high enough for the application you are building, the variables can be changed to give the exact same output using rem rather than px units.</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">:root {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">var-base-font: 0.75rem;
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">h1 {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">font-size: calc(var(base-font) * 2);
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">h2 {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">font-size: calc(var(base-font) * 1.75);
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span><span style="background-color:#2b303b;color:#c0c5ce;">
</span><span style="background-color:#2b303b;color:#c0c5ce;">h3 {
</span><span style="background-color:#2b303b;color:#c0c5ce;">  </span><span style="background-color:#2b303b;color:#c0c5ce;">font-size: calc(var(base-font) * 1.5);
</span><span style="background-color:#2b303b;color:#c0c5ce;">}
</span></pre>
<p><a href="http://jonathankingston.github.io/mythhub/?m=%3Aroot+%7B%0D%0A++var-base-font%3A+0.75rem%3B%0D%0A%7D%0D%0A%0D%0Ah1+%7B%0D%0A++font-size%3A+calc%28var%28base-font%29+*+2%29%3B%0D%0A%7D%0D%0A%0D%0Ah2+%7B%0D%0A++font-size%3A+calc%28var%28base-font%29+*+1.75%29%3B%0D%0A%7D%0D%0A%0D%0Ah3+%7B%0D%0A++font-size%3A+calc%28var%28base-font%29+*+1.5%29%3B%0D%0A%7D">Example CSS Myth font recalculation</a></p>
<p>Myth is in its early stages, but even so it's clear this style of CSS development could be the most future-proof.</p>
<h2>Future developments for Myth</h2>
<p>I would like to see the following (Edited with latest improvements):</p>
<ul>
<li>It would be great if I could configure a per browser output
<ul>
<li>Selective browser extensions, currently it supports browser auto-prefixing like: <code>-webkit-transition: opacity 1s;</code> output instead of just the corresponding browser specified</li>
<li>Provide the least amount of fixes for modern browsers</li>
</ul>
</li>
<li>~~Choose to auto-follow @import and compile all files into one .css file~~</li>
<li>~~<a href="https://github.com/segmentio/myth/issues/44">output source maps</a>~~</li>
<li>Allow to declare what screen size the user is to strip out media queries that are not relevant</li>
</ul>
<h2>Future developments of CSS values specification</h2>
<p>I would like to see the following:</p>
<ul>
<li><a href="http://www.w3.org/TR/css3-values/#numeric-types">Less ambiguity in value precision</a> or the ability to provide a precision
<ul>
<li>I think this matters more when you are using multiple compilers that you get a consistent numeric precision.</li>
</ul>
</li>
<li>WEBIDL format or similar to improve parsers and validators</li>
</ul>

          </div>
        
        </article>
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <ul class="social-media-list">
      

      
    </ul>
  </div>

</footer>


  </body>

</html>
